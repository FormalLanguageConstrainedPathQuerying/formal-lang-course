# Интерпретатор GL
Для запуска необходимо [сегнерировать](interpret/grammar_setup.md) дополнительные файлы для парсера по грамматике, используя скрипт buidlParser.sh, перед этим необходимо активировать окружение rye.


## Используемые алгоритмы
В качестве алгоритма выполнения запросов к графам был выбран тензорный алгоритм. В силу того, что КС языки являются расширением регулярных, все алгоритмы используемые для решения задачи достижимости в КС применимы и к регулярным языкам. Тензорный алгоритм был выбран по причине того, что его реализация в контексте данного курса оказалась более стабильной к запросам различного вида.
## Система типов
Вывод типов реализован следующим образом:
Производится обход дерева, если мы не встречаем в выражении различных нетерминалов, то можем считать это выражение регулярным, иначе оно относится к типу КС(т.е. в одном случае мы конструируем конечный автомат, а в другом - рекурсивный автомат). Если мы не можем определить тип выражения, то ему присваивается тип UNKNOWN, и вывод типа заканчивается с ошибкой.
### Имена
С помощью конструкции `let =` всякому имени может быть присвоено значение. Тип переменной определяется типом выражения справа от равно.

Также можно задать именованный граф, используя следующую конструкцию:
`declare = 'let' VAR 'is' 'graph'`
### Примитивные выражения
- `CHAR`
- `NUM`
### Выражения
`expr = NUM | CHAR | VAR | edge_expr | set_expr | regexp | select`
### Регулярные выражения:
`regexp = CHAR | VAR | '(' regexp ')' | (regexp '|' regexp) | (regexp '^' range) | (regexp '.' regexp) | (regexp '&' regexp)`
### Множеста set_expr
Типы данных, содержащие одно или несколько выражений `expr`

Объекты этого типа создаются следующим образом:
- `'[' expr (',' expr)* ']'`

### Ребро графа
Задается следующим образом:

`'(' expr ',' expr ',' expr ')'`

### Пары
Типы данных, содержащие два значения, используются для представления результата запроса к графу.

### RSM
Тип данных, содержащий кс-грамматику, представленную как рекурсивный автомат.

### FA
Тип данных, содержащий регулярную грамматику, представленную как рекурсивный автомат.

Типы FA и RSM не задаются явно, и выводятся в ходе обработки регулярного выражения

### Graph

Задается следующим образом:

`let g is graph`

Является мутабельным, позволяет изменять свою структуру:

`add edge (1, "a", 2) to g`

`remove edge (1, "a", 2) from g`
